---
title: "461 Final"
author: "Ryan Walsh"
date: "2022-11-11"
output: html_document
---

```{r}

```

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(dplyr)
library(tidyverse)
df <- readRDS("C:/Users/student/Desktop/R Math421/rywal.github.io/brooklyn_sales.rds")
```

```{r}
#colSums(is.na(df))
df1 <- df %>% select(-FIRM07_FLA,-EDesigNum,-ZMCode,-APPDate,-Landmark,-HistDist ,-Ext,-LtdHeight,-SPDist3,-SPDist2,-SPDist1,-Overlay2,-Overlay1,-ZoneDist4,- ZoneDist3,-ZoneDist2,-PFIRM15_FL,-OwnerType)
#colSums(is.na(df1))
df1 <- drop_na(df1)
##Note that as in other uploaded datasets of NYC housing on Kaggle, many of these transactions have a sale_price of $0 or only a nominal amount far less than market value. These are likely property transfers to relatives and should be excluded from any analysis of market prices.
df1 <- df1 %>% filter(!sale_price == 0)
```

```{r}
library(lubridate)
df1$month = month(df1$sale_date)

# day of the week
df1$weekday = wday(df1$sale_date)

# day of the month
df1$monthday <- mday(df1$sale_date)
```

```{r}
#avg sale price is 
df1 %>% summarise(Mean_Sale_Price = mean(sale_price))
#790641.7
df1 %>% summarise(Median_Sale_Price = median(sale_price))
#485000
#possibly skew right
```

```{r}
df2 <- df1 %>% filter(tax_class %in% c("2", "2A", "2B","2C"))

summary(df2$sale_price)
  #Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
  #1    190000    360000    800681    691000    169000000
df2 <- df2 %>% filter(sale_price>=190000 ,sale_price<=691000)
```

```{r}
df2 %>% group_by(sale_price,tax_class) %>% summarise(mean = mean(sale_price)) %>%  ggplot(aes(x=tax_class,y =mean)) + geom_col()
```

```{r}
df2 <- df2 %>% select(-CD,-CT2010,-CB2010,-OwnerName)
#continuing to remove varaibles 
```


```{r}
write.csv(df2,"C:/Users/student/Desktop/R Math421/Actual461Data.csv")
```
